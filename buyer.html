<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="buyer.css">
</head>
<body>
     <header>
    <h1>Add Buyer Information</h1>
  </header>

  <main>
    <form id="buyerForm">

      <div class="form-group">
        <label for="companyName">Company Name *</label>
        <input type="text" id="companyName" placeholder="Enter company name" required>
        <small class="error" id="companyError"></small>
      </div>

      <div class="form-group">
        <label for="contactPerson">Contact Person</label>
        <input type="text" id="contactPerson" placeholder="Enter contact person">
      </div>

      <div class="form-group">
        <label for="mobileNumber">Mobile Number *</label>
        <input type="text" id="mobileNumber" placeholder="Enter 10-digit mobile number" required>
        <small class="error" id="mobileError"></small>
      </div>

      <div class="form-group">
        <label for="gpayNumber">GPay Number</label>
        <input type="text" id="gpayNumber" placeholder="Enter GPay number">
      </div>

      <div class="form-group">
        <label for="accountNumber">Account Number</label>
        <input type="text" id="accountNumber" placeholder="Enter account number">
      </div>

      <div class="form-group">
        <label for="gstNumber">GST Number *</label>
        <input type="text" id="gstNumber" placeholder="Enter GST number" required>
        <small class="error" id="gstError"></small>
      </div>

      <div class="form-group">
        <label for="address">Address *</label>
        <textarea id="address" placeholder="Enter address" required></textarea>
        <small class="error" id="addressError"></small>
      </div>

      <div class="form-group">
        <label for="plasticType">Type of Plastics Bought</label>
        <input type="text" id="plasticType" placeholder="e.g. HDPE, LDPE">
      </div>

      <!-- ✅ Success message moved here -->
      <div id="successMessage" class="success-message">✅ Buyer added successfully!</div>

      <button type="submit" class="submit-btn">Save Buyer</button>
    </form>
  </main>




  </body>
</html>



  <script>
    let buyers = JSON.parse(localStorage.getItem('buyers')) || [];

    const form = document.getElementById('buyerForm');
    const successMessage = document.getElementById('successMessage');

    const companyNameInput = document.getElementById('companyName');
    const mobileInput = document.getElementById('mobileNumber');
    const gstInput = document.getElementById('gstNumber');
    const addressInput = document.getElementById('address');

    const companyError = document.getElementById('companyError');
    const mobileError = document.getElementById('mobileError');
    const gstError = document.getElementById('gstError');
    const addressError = document.getElementById('addressError');

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      // Reset errors and message
      companyError.textContent = '';
      mobileError.textContent = '';
      gstError.textContent = '';
      addressError.textContent = '';
      successMessage.style.display = 'none';

      const companyName = companyNameInput.value.trim();
      const contactPerson = document.getElementById('contactPerson').value.trim();
      const mobile = mobileInput.value.trim();
      const gpay = document.getElementById('gpayNumber').value.trim();
      const account = document.getElementById('accountNumber').value.trim();
      const gst = gstInput.value.trim();
      const address = addressInput.value.trim();
      const plastics = document.getElementById('plasticType').value.trim();

      let valid = true;

      // ✅ Unique company name
      if (buyers.some(buyer => buyer.companyName.toLowerCase() === companyName.toLowerCase())) {
        companyError.textContent = 'Company name must be unique.';
        valid = false;
      }

      // ✅ Mobile number validation
      if (!/^\d{10}$/.test(mobile)) {
        mobileError.textContent = 'Mobile number must be exactly 10 digits.';
        valid = false;
      }

      // ✅ GST required
      if (gst === '') {
        gstError.textContent = 'GST number is required.';
        valid = false;
      }

      // ✅ Address required
      if (address === '') {
        addressError.textContent = 'Address is required.';
        valid = false;
      }

      if (!valid) return;

      const newBuyer = { companyName, contactPerson, mobile, gpay, account, gst, address, plastics };
      buyers.push(newBuyer);
      localStorage.setItem('buyers', JSON.stringify(buyers));

      successMessage.style.display = 'block';
      form.reset();

      // Hide message after 3 seconds
      setTimeout(() => {
        successMessage.style.display = 'none';
      }, 3000);
    });
  </script>



